<!DOCTYPE html>
<html>
<head>
    <title>WebVR con Cámara en Vivo</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <a-scene vr-mode-ui="enabled: true">
        <!-- Definir el video como fondo -->
        <a-assets>
            <video id="backgroundVideo" autoplay playsinline webkit-playsinline></video>
        </a-assets>

        <!-- Cámara VR -->
        <a-camera position="0 1.6 0">
            <a-cursor color="white"></a-cursor>
        </a-camera>

        <!-- Plano gigante que actúa como fondo con la cámara en vivo -->
        <a-plane 
            src="#backgroundVideo" 
            position="0 1.6 -10"  <!-- Se aleja más la cámara -->
            width="26"  <!-- Se aumenta el ancho para cubrir más espacio -->
            height="9"  <!-- Se aumenta la altura -->
            rotation="0 0 0">
        </a-plane>

        <!-- Imagen flotante en VR -->
        <a-image src="HIRO.jpg" position="0 1.6 -3" scale="1.5 1.5 1.5"></a-image>
    </a-scene>

    <script>
        // Acceder a la cámara trasera
        navigator.mediaDevices.getUserMedia({ video: { facingMode: { exact: "environment" } } })
            .then(function (stream) {
                let video = document.getElementById("backgroundVideo");
                video.srcObject = stream;
            })
            .catch(function (err) {
                console.warn("No se pudo acceder a la cámara trasera, usando la frontal:", err);
                
                // Si la trasera no está disponible, usa la frontal
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function (stream) {
                        let video = document.getElementById("backgroundVideo");
                        video.srcObject = stream;
                    })
                    .catch(function (err) {
                        console.error("No se pudo acceder a ninguna cámara:", err);
                    });
            });
    </script>
</body>
</html>
